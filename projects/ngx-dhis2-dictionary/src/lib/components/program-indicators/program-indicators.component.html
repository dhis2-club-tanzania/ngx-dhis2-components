<div *ngIf="{ allProgramIndicators: allProgramIndicators$ | async } as params">
  <div class="container-fluid" style="margin-top: 15px">
    <div class="row">
      <div class="col-md-4" style="padding-top: 5px">
        <strong style="font-size: 1.2em">
          {{ params?.allProgramIndicators?.pager?.total }}
        </strong>
        Program indicators
      </div>
      <div class="col-md-4">
        <input
          id="searching-input"
          (keyup)="searchIndicator($event)"
          placeholder="Search program indicator "
        />
      </div>
      <div class="col-md-4">
        <!-- <div class="cursor-pointer" style="float: right; margin-right: 10px">
          <a
            class="removeGroups"
            style="float: right"
            title="Clear all"
            *ngIf="indicatorGroupsForSearching.length != 0"
            (click)="indicatorGroupsForSearching = []"
          >
            <i>
              <img
                height="20"
                width="20"
                style="margin-top: -5px"
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAOLSURBVGhD7ZrHqlRBEIYvqAvFhHFpfAn3RgwYUXRvduMTmBEfwQuKKEZcGbaKWRFdqrg1Lcwujf8Ht6Fs6szpPmHmDswPHwxnuqq77jmnurrmDg000EBd1QyxURwRV8Rt8XQEPl8WfLdBMHZUaYrYKx6IP+JvIozFZrfAR880VRwV34S30By+isMCn13VNvFBeIuqwzuxRbSuieKc8BYR4K97TRwXu8TWEfjMNb4ru4unxQTRimYKXlpv4p/ivFgsxogyMWaJuCCw9Xw+EY0nBIJ4KbwJL4p5oqrmC7KZ5/uFYO5GxOP0WMSTfBSrRFNaLfAZz/NINPKYnRWx81dirmha3Fl8x/OdErVEdoqdvhazRFvCN3PE824WlUROj1Mst36OaFsLxSdh5yY1TxbZOiasI1gpPC0S7O65wgZbT2tEPP8hkSXuBvuBdUJ28sRCwtj9XEgUY7HBtiiYOJt9EVnlzB5hHZDrvRRrgwikBBOCCBQFs0DE+8xOkSxSnjVms/O0T9hxgU7BxEEE8OWJTdOOuyeSxG4aV7Hs2EUqWpgXTM7YoGXCjv0tpotScZ6whjyXZWVHygKrBIHGiu/C2qwXpeLgY42uixR1WmjVIIJuCmuXlL3iTEHFmqqiBXukBoFOCGtblEH/0x1hjTjB5SglmJwgUJxFOTaX6rmwRpwlctUpmNwgUFwqPROlYpA16ttARuOjRSlj7ZMerUvCGvXty94P6fegKBXNM2tEo6CXG+I4EW+I60SpKFEoA6zhUlGknAVWCWa5sGNZ2zSRpIfCGlO4eepG0Ri/s3dFsshU1phSmm5HrLbLeE6KcRm/QySLgxXFonVA6eLJBpMSRFAIpigIdFXYNbCm7OMufV3rBDh+emIhTR9114p4/gMiW0T+XlhHNAS43W2LOT4LO/cbMUlUEi0Y6wzabgfNFl47aJOopTMidkoTrU6btEic0b0ghkVt0a6Mz/BAj4s2Z1Pi1BcnGGisZYpoJNNQjicBshl/yarCNs5OgUab2EEc+L07A+R6Nk0aBZyxy8SYFYLi75fwfLIpJzUZqohbzI8w3sQB6qIbgoqVjZWzBPCZaxSAP4RnGzgpxovWRTajF+stog5vBV2crop9hh8wvRc0F/YMSnN+i+mZCIg25n0RV82dYCw220WlLnub4uXkrMCdomq9JcI/DPCZa/SkGJNcig800EB1NTT0D1aOmPFs1wNIAAAAAElFTkSuQmCC"
              />
            </i>
          </a>
          <span class="group-icon" (click)="showGroups()">
            <img
              title="Indicator group filter"
              height="30"
              width="40"
              src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJbSURBVGhD7drPSxRhHMfx7QcVZUbULQsSoi56iehQQaQnD11EiDoEeYggKPoHOmQR1CWhIiIINDDrIpKXQOoQFAQRnTuLRj+1ol/a+/Nse5Ed93lmnO9M9XzghfMs+4zz2d0ZZ2esxMQUkyU4iuf4hjlj7zGEHUgdlbiF2kp/4Z2hadR+t5YPIFV6oZV8hN6VtbDOVgxA2/EG6xCcF9AKjrhRcdEn4zG0LSf0QEiWQx+ln1itBwrOSajITTcKiN5CTfzgRv5ZiWXVxQWz4s9P3xyGtueOGwUkTZE1mMJ9N0pOC7TzXnUjv5gW2QDN+QIdLtfXoeechZ53F74xLaKMQfN8HIRvzIvoEH0FL/E6wSMcQkjMi+SVWOSfK/IJrSVwGpmKlE3qIjpNqXfksTaJTEXizr7IiUVikZxiXmQTNLdRtmBVddErpkU05yvG3Sg52/ADg27kF/Mi+rvzHV3YWccuXIPWrYsKvjH/aN2G5jWid2QvfGNeRBctTmEUuqg331Oo7B6ExLxIXolFakVm0FkCF5CpSNmkLqKjy8MSeIVMReLOvsiJRf77Ijqf2lxdXDC7sbG66BXTIrpArZPGZ26UnDbM4p4b+cW0SBN05qsyx9GTYBhat+5P+sb8o3UJmteIzhja4ZvURXRVXRN1QyY03bgOvfLz6Z5IH/TlKiS6j5mqiFK7Peyz8+adc9C2XHajwOgV1GR9k1uqBwqKvt+/hbalQw+EZjs+Qyt4gjOot/PmRfvFReifB7QND5A6+zEBrahII2hGpuiwegz9uGHsPPYh5i9LpfIbp7H+LIdnKu0AAAAASUVORK5CYII="
            />
          </span>
        </div> -->
        <div *ngIf="showIndicatorGroups && programIndicatorGroups$">
          <ul class="submenu" style="height: 300px; overflow: auto">
            <input
              id="searching-input-group"
              placeholder="Search group "
              [(ngModel)]="searchingTextForIndicatorGroup"
            />
            <li
              id="indGroup.id"
              *ngFor="
                let indGroup of (programIndicatorGroups$ | async)[
                  'programIndicatorGroups'
                ] | searchIndicatorGroup: searchingTextForIndicatorGroup
              "
            >
              <a
                ><input
                  type="checkbox"
                  name="indicator-groups-ids"
                  (change)="
                    updateIndicatorGroupsForSearch(
                      indGroup,
                      $event.target.checked
                    )
                  "
                />
                {{ indGroup.name }}({{ indGroup.programIndicators.length }})
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="container-fluid" style="margin-top: 20px">
    <div *ngIf="params?.allProgramIndicators">
      <div class="card-deck" style="margin-bottom: 20px" *ngIf="!listingIsSet">
        <div
          class="col-sm-12 col-md-3"
          *ngFor="
            let programIndicator of params?.allProgramIndicators
              ?.programIndicators
              | filterIndicatorsByGroupId: indicatorGroupsForSearching
          "
        >
          <app-program-indicator-properties
            [metadataIdentifiers]="metadataIdentifiers"
            [programIndicator]="programIndicator"
            [listingIsSet]="listingIsSet"
            (selectedMetadata)="selectedMetadata($event)"
          ></app-program-indicator-properties>
        </div>
      </div>
      <div *ngIf="listingIsSet">
        <div
          *ngFor="
            let programIndicator of params?.allProgramIndicators
              ?.programIndicators
              | filterIndicatorsByGroupId: indicatorGroupsForSearching
          "
        >
          <app-program-indicator-properties
            [metadataIdentifiers]="metadataIdentifiers"
            [programIndicator]="programIndicator"
            [listingIsSet]="listingIsSet"
            (selectedMetadata)="selectedMetadata($event)"
          ></app-program-indicator-properties>
        </div>
      </div>
      <div
        style="margin-top: 30px"
        *ngIf="params?.allProgramIndicators?.programIndicators?.length > 0"
      >
        <div class="w-100 d-flex justify-content-left">
          <span *ngIf="listingIsSet">Items count</span>
          <select
            *ngIf="listingIsSet"
            class="form-control"
            #t
            (change)="setItemsPerPage(t.value)"
            style="width: 80px; display: inline; margin-left: 10px"
          >
            <option
              *ngFor="let item of pageItemsConfiguration"
              [value]="item.value"
              [selected]="item.value == itemsPerPage"
            >
              {{ item.symbol }}
            </option>
          </select>
          <button
            class="ml-2"
            mat-stroked-button
            [disabled]="params?.allProgramIndicators?.pager?.page == 1"
            (click)="
              getNewList(
                'prev',
                params?.allProgramIndicators?.pager?.page,
                itemsPerPage
              )
            "
          >
            Previous
          </button>
          <button
            mat-stroked-button
            [disabled]="
              params?.allProgramIndicators?.pager?.page ==
              (
                params?.allProgramIndicators?.pager?.total / itemsPerPage
              ).toFixed(0)
            "
            class="ml-2"
            (click)="
              getNewList(
                'next',
                params?.allProgramIndicators?.pager?.page,
                itemsPerPage
              )
            "
          >
            Next
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
