<div>
  <div class="row">
    <ng-container *ngFor="let item of dashboardItems">
      <div class="col-sm-6 mb-3">
        <mat-card class="visualization-card">
          <div class="w-100 d-flex justify-content-left">
            <button
              mat-stroked-button
              (click)="toggleFilters($event, item?.id)"
            >
              Filters
            </button>
            <button
              class="ml-1"
              *ngIf="itemsToShowFilters[item?.id]"
              mat-stroked-button
              (click)="toggleFilterType($event, 'PERIOD')"
            >
              Period
            </button>
            <button
              class="ml-1"
              *ngIf="itemsToShowFilters[item?.id]"
              mat-stroked-button
              (click)="toggleFilterType($event, 'ORG_UNIT')"
            >
              Org Unit
            </button>
          </div>

          <div
            class="mt-1"
            style="
              border: solid 1px #eee;
              position: absolute;
              z-index: 101;
              padding: 4px 8px;
              background-color: #fff;
              width: 100%;
            "
            *ngIf="showFilterSelections && itemsToShowFilters[item?.id]"
          >
            <lib-visualization-filters
              [filterType]="currentFilterType"
              (selections)="onGetSelections($event)"
            ></lib-visualization-filters>
            <div
              [ngClass]="{ 'mt-2': currentFilterType != 'PERIOD' }"
              class="d-flex justify-content-end mb-2"
            >
              <button mat-stroked-button (click)="onCancel($event)">
                Cancel
              </button>
              <button
                mat-stroked-button
                class="ml-2"
                (click)="onUpdate($event, selections)"
              >
                Update
              </button>
            </div>
          </div>
          <!-- {{ item | json }} -->
          <div style="z-index: 100">
            <lib-dashboard-visualization-item
              [dashboardItemConfig]="item"
              [selections]="selections"
            ></lib-dashboard-visualization-item>
          </div>
        </mat-card>
      </div>
    </ng-container>
  </div>
</div>

<!-- 
[ngClass]="{
  'col-sm-12': item.shape === 'DOUBLE_WIDTH',
  'col-sm-6': item.shape === 'NORMAL'
}" -->
